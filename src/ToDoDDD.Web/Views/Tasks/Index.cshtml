@using ToDoDDD.DAL.Entities;
@model IEnumerable<Taska>

    <a asp-action="Create">Создать</a>
    <h2> Задачи</h2>

<table style="border-collapse: collapse; border: 1px solid black; border-radius: 10px;">
    <tr style="border: 1px solid black;">
        <th style="padding: 10px; border: 1px solid black;"> <a asp-action="Index" asp-route-sortBy="Name">Название</a> </th>
        <th style="padding: 10px; border: 1px solid black;"><a asp-action="Index" asp-route-sortBy="Desc">Описание</a> </th>
        <th style="padding: 10px; border: 1px solid black;"><a asp-action="Index" asp-route-sortBy="Status">Статус</a></th>
        <th style="padding: 10px; border: 1px solid black;"><a asp-action="Index" asp-route-sortBy="Prioritet">Приоритет</a></th>
        <th style="padding: 10px; border: 1px solid black;"><a asp-action="Index" asp-route-sortBy="CreateDate">Дата создания</a></th>
        <th> Действия </th>
        
    </tr>
    @foreach (Taska task in Model)
    {
        <tr style="border: 1px solid black;">
            <td style="padding: 10px; border: 1px solid black;">@task.TaskName  </td>
            <td style="padding: 10px; border: 1px solid black;">@task.Desc </td>
            <td style="padding: 10px; border: 1px solid black;">@task.Status.StatusName </td>
            <td style="padding: 10px; border: 1px solid black;">@task.Prioritet.PrioritetName </td>
            <td style="padding: 10px; border: 1px solid black;">@task.CreateDate </td>
            @*Действия*@
            <td>
                @if (task.Status.StatusName == "Новая")
                {
                    <a asp-action="ChangeStatus" asp-route-id="@task.Id" class=" btn btn-info">Открыть</a>
                    <a asp-action="Details" asp-route-id="@task.Id" class=" btn btn-primary">Детали</a>
                    <a asp-action="Delete" asp-route-id="@task.Id" class=" btn btn-danger">Удалить</a>
                }
                @if (task.Status.StatusName == "Открыта")
                {
                    <a asp-action="ChangeStatus" asp-route-id="@task.Id" class=" btn btn-dark">Закрыть</a>
                    <a asp-action="Details" asp-route-id="@task.Id" class=" btn btn-primary">Детали</a>
                }
                @if (task.Status.StatusName == "Закрыта")
                {
                    <a asp-action="Delete" asp-route-id="@task.Id" class=" btn btn-danger">Удалить</a>
                    <a asp-action="Details" asp-route-id="@task.Id" class=" btn btn-primary">Детали</a>
                }

            </td>
        </tr>
    }
</table>